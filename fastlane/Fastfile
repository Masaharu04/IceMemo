default_platform(:ios)

platform :ios do
  desc "CI環境でのコンパイルチェックを実行します" 
  lane :ci_build_check do
    gym(
      scheme: "FadeMemo",
      configuration: "Debug",
      skip_archive: true
    )

    UI.success("✅ ビルドチェックが正常に完了しました！")
  end
end

after_all do |lane|
  if ENV['GITHUB_TOKEN']
    github_status(
      state: 'success',
      context: "fastlane-ci-build-check",
      description: "Fastlane build check passed."
    )
  end
end

error do |lane, exception|
  if ENV['GITHUB_TOKEN']
    github_status(
      state: 'failure',
      context: "fastlane-ci-build-check",
      description: "Fastlane build check failed."
    )
  end
end