name: CI Build Check for iOS

on:
  push:
    branches: [ "main", "develop" ]
  pull_request:
    branches: [ "main", "develop" ]

jobs:
  fastlane_ci_build:
    name: Fastlane Build Check
    runs-on: macos-latest
    
    steps:
    # ------------------------------------
    # ✅ Report Success (Success only)
    # ------------------------------------
    - name: ✅ Report Success Status to PR
      if: success()
      uses: Sibz/github-status-action@v1.1.0
      with:
        # 修正: status を state に変更
        state: success 
        description: 'Build check successful'
        context: 'fastlane-ci-build-check'
        sha: ${{ github.event.pull_request.head.sha || github.sha }}
        
    # ------------------------------------
    # ❌ Report Failure (Failure only)
    # ------------------------------------
    - name: ❌ Report Failure Status to PR
      if: failure()
      uses: Sibz/github-status-action@v1.1.0
      with:
        # 修正: status を state に変更
        state: failure 
        description: 'Build check failed'
        context: 'fastlane-ci-build-check'
        sha: ${{ github.event.pull_request.head.sha || github.sha }}
          